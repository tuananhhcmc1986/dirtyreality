Publish blog draft automation rule.


STEP 1 — SOURCE

drafts/<category>/<filename>.md



STEP 2 — CATEGORY

category must be one of:

mes
dms
ba
linh-tinh

target folder:

docs/<category>/posts/



STEP 3 — SLUG

convert filename to slug:

lowercase
remove Vietnamese accents
replace spaces with hyphen

example:

mes không thất bại vì công nghệ.md

→ mes-khong-that-bai-vi-cong-nghe.html



STEP 4 — DATE FORMAT

format must be:

dd/mm/yyyy

example:

13/02/2026



STEP 5 — CONVERT MARKDOWN

each paragraph → <p>...</p>



STEP 6 — GENERATE RELATED POSTS

scan folder:

docs/<category>/posts/

sort newest first

exclude current post

take latest 5 posts

generate:

<a href="slug.html">Title</a>



STEP 7 — APPLY TEMPLATE

use:

templates/post-template.html

replace:

{{TITLE}}
{{DATE}}
{{CATEGORY}}
{{CONTENT}}
{{RELATED_POSTS}}



STEP 8 — SAVE FILE

docs/<category>/posts/<slug>.html



STEP 9 — UPDATE CATEGORY INDEX

edit:

docs/<category>/index.html

add inside:

<div class="posts">


insert:

<div class="post-item">
    <a href="posts/<slug>.html">
        TITLE
    </a>
</div>

<div class="post-year">
    DATE
</div>



STEP 10 — DO NOT MODIFY OTHER FILES



STEP 11 — FINAL URL

must work at:

/dirtyreality/<category>/posts/<slug>.html



STEP 12 — REPUBLISH MODE

If target file already exists:

docs/<category>/posts/<slug>.html

Then:

overwrite file content

DO NOT create duplicate entry in:

docs/<category>/index.html

Check existing links first.

Only create index entry if slug does not exist.



STEP 13 — DARK MODE SUPPORT

Ensure generated HTML file includes:

<div class="theme-toggle" onclick="toggleTheme()">
toggle theme
</div>

positioned immediately after:

<body>

and before:

<div class="container">



STEP 14 — THEME SCRIPT INJECTION

Ensure generated HTML includes script reference:

<script src="../../theme.js"></script>

positioned immediately before:

</body>



STEP 15 — TEMPLATE INTEGRITY CHECK

Ensure template:

templates/post-template.html

contains:

theme-toggle element

nav-back element

theme.js script reference

style.css reference

If missing, inject automatically.



STEP 16 — REPUBLISH TEMPLATE UPGRADE MODE

When republishing existing post:

overwrite entire HTML content using latest template

ensure dark mode toggle exists

ensure theme.js script exists

ensure nav-back exists

ensure no duplicate script or toggle elements

preserve slug and URL
